(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"1k1V":function(e,a,i){e.exports=i.p+"static/mujer-b9d874a2aec8953de70bd3dcd0b58d89.png"},"8FO5":function(e,a,i){"use strict";i.r(a);i("q1tI"),i("q4sD");var t=i("MKeS"),n=i("1k1V"),o=i.n(n),r=i("K0D8"),l=i.n(r),s=i("rBaf"),c=i("qKvR");a.default=function(){var e,a,n=new Array(256).fill(0),r=new Array(256).fill(0),d=Number.MAX_VALUE,m=0;if("undefined"!=typeof window){var u=Object(t.a)((function(){return Promise.all([i.e(0),i.e(1)]).then(i.t.bind(null,"ixhd",7))}));return Object(c.d)("div",{className:"ml-5 mr-5 my-3"},Object(c.d)("h1",null,"Histograma y segmentación imagen en escala de grises y color"),Object(c.d)("hr",{className:"my-3"}),Object(c.d)("p",null,"Para el proceso de segmentación se uso Thresholding usando el metodo de Otsu para el calculo automatico del valor umbral y el modelo de color HSV sobre la imagen para extraer el valor de intensidad del pixel, que es un valor entero entre 0 y (L - 1) siendo L el numero maximo que un pixel puede representar. Para este caso particular como la imagen esta a escala de grises, L toma un valor de 256; siendo 0 negro puro y 255 blanco puro."),Object(c.d)(u,{className:"d-flex justify-content-center",setup:function(i,t){i.createCanvas(3*e.width+20,e.height+10).parent(t),i.colorMode(i.HSB,255),i.image(e,0,0),e.loadPixels();for(var o=0;o<e.width;o++)for(var l=0;l<e.height;l++){var s=i.int(i.brightness(i.get(o,l)));n[s]++}n=n.map((function(e){return 0===e?1:e}));for(var c=e.pixels.length/4,u=0;u<256;u++)r[u]=n[u]/c;for(var h=0;h<255;h++){var g=0,p=0;for(u=0;u<h;u++)g+=r[u];for(u=h+1;u<256;u++)p+=r[u];var b=0,f=0;for(u=0;u<h;u++)b+=u*r[u]/g;for(u=h+1;u<256;u++)f+=u*r[u]/p;var v=0,O=0;for(u=0;u<h;u++)v+=Math.pow(u-b,2)*(r[1]/g);for(u=h+1;u<256;u++)O+=Math.pow(u-f,2)*(r[1]/p);var j=g*v+p*O;j<d&&(d=j,m=h)}a.loadPixels();for(var w=0;w<a.width;w++)for(var y=0;y<a.height;y++){(s=i.int(i.brightness(i.get(w,y))))<=m?a.set(w,y,i.color(0)):s>m&&a.set(w,y,i.color(255))}a.updatePixels(),i.image(a,e.width+5,0),i.push(),i.stroke("red"),i.translate(2*e.width+10,0);for(var x=0;x<e.width;x+=2){var M=i.int(i.map(x,0,e.width,0,255)),k=i.map(n[M],0,i.max(n),e.height,0);i.line(x,e.height,x,k)}i.pop()},preload:function(i){e=i.loadImage(o.a),a=i.loadImage(o.a)}}),Object(c.d)("div",{className:"d-flex justify-content-center"},Object(c.d)("img",{src:l.a,alt:"SegColor"})),Object(c.d)("h2",null,"Algoritmo metodo Thresholding Otsu"),Object(c.d)(s.a,{code:"---Archivo React.js\n//Calcula el histograma\nfor (let x = 0; x < img.width; x++) {\n    for (let y = 0; y < img.height; y++) {\n        var bright = p5.int(p5.brightness(p5.get(x, y)));\n        hist[bright]++;\n    }\n}\nhist = hist.map((x) => (x === 0 ? 1 : x));\n\n//Calculo de la probabilidad para cada valor de intensidad\nvar imageTotalPixels = img.pixels.length / 4;\nfor (var i = 0; i < 256; i++) {\n    probability[i] = (hist[i]) / imageTotalPixels;\n}\n\n//iterar sobre todos los posibles Thresholds y encontrar la varianza minima\nfor(var t = 0; t < 255; t++) {\n    //pesos clase 1 y 2\n    var c1Weight = 0;\n    var c2Weight = 0;\n    for(var i = 0; i < t; i++) {\n        c1Weight += probability[i];\n    }\n    for(var i = t + 1; i < 256; i++) {\n        c2Weight += probability[i];\n    }\n\n    //promedios calse 1 y 2\n    var c1Mean = 0;\n    var c2Mean = 0;\n    for(var i = 0; i < t; i++) {\n        c1Mean += (i * probability[i]) / c1Weight;\n    }\n    for(var i = t + 1; i < 256; i++) {\n        c2Mean += (i * probability[i]) / c2Weight;\n    }\n\n    //varianzas clase 1 y 2\n    var c1Var = 0; \n    var c2Var = 0;\n    for(var i = 0; i < t; i++) {\n        c1Var += ((i - c1Mean)**2) * (probability[1] / c1Weight);\n    }\n    for(var i = t + 1; i < 256; i++) {\n        c2Var += ((i - c2Mean)**2) * (probability[1] / c2Weight);\n    }\n    \n    var weightedVar = (c1Weight * c1Var) + (c2Weight * c2Var);\n    if(weightedVar < minVar) {\n        minVar = weightedVar;\n        minThreshold = t;\n    }\n}\n"}),Object(c.d)("h2",null,"Conclusiones"),Object(c.d)("ul",null,Object(c.d)("li",null,"En el analisis con una imagen a color se tuvo una imagen segmentada menos precisa. Se presume que esto es porque la diferencia de los dos picos mas grandes del histograma de la imagen que se uso como prueba no es significativa y por lo tanto el metodo Otsu que funciona mejor con histogramas bimodales no se desempeño optimamente"),Object(c.d)("li",null,"El metodo de Otsu es un metodo sencillo que se implementa en tiempo lineal. Tiene la limitación de desempeñarse optimamente unicamente en histogramas bimodales aunque existen tecnicas para suplir esta falencia")),Object(c.d)("h2",null,"Referencias"),Object(c.d)("ul",null,Object(c.d)("li",null,Object(c.d)("a",{href:"https://en.wikipedia.org/wiki/Image_segmentation"},"Segmentación")),Object(c.d)("li",null,Object(c.d)("a",{href:"https://es.wikipedia.org/wiki/Modelo_de_color_HSV"},"Modelo de color HSV")),Object(c.d)("li",null,Object(c.d)("a",{href:"https://es.wikipedia.org/wiki/M%C3%A9todo_del_valor_umbral"},"Metodo valor umbral")),Object(c.d)("li",null,Object(c.d)("a",{href:"https://en.wikipedia.org/wiki/Otsu%27s_method"},"Metodo de Otsu")),Object(c.d)("li",null,Object(c.d)("a",{href:"https://processing.org/examples/histogram.html"},"https://processing.org/examples/histogram.html")),Object(c.d)("li",null,Object(c.d)("a",{href:"https://editor.p5js.org/ebenjmuse/sketches/HyPfeGkCZ"},"https://editor.p5js.org/ebenjmuse/sketches/HyPfeGkCZ")),Object(c.d)("li",null,"Handbook of Image and Video Processing (Second Edition)"),Object(c.d)("li",null,"Metz, M. (2018). Optimum Global Thresholding Using Otsu´s Method. https://github.com/Michael-Metz/image-processing/blob/master/otsus-method-paper.pdf"),Object(c.d)("li",null,"Digital Image Processing (CS/ECE 545) Lecture 2: Histograms and Point Operations (Part 1)")))}return null}},K0D8:function(e,a,i){e.exports=i.p+"static/SegColor-828134a9418a02165cef1bead096625a.png"},q4sD:function(e,a,i){},rBaf:function(e,a,i){"use strict";i("q4sD"),i("q1tI"),i("MKeS");var t=i("qKvR");a.a=function(e){return Object(t.d)("pre",{className:"bg-light"},e.code)}}}]);
//# sourceMappingURL=component---src-pages-histograma-js-cf38fa91a777c14471d5.js.map